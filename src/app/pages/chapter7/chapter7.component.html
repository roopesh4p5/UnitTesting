<div class="max-w-3xl mx-auto p-4">
    <h1 class="text-3xl font-bold mb-4">7. Code Coverage</h1>

    <h2 class="text-xl font-bold mb-2">7.1. Understanding Code Coverage</h2>
    <p>
        As we write tests for our application, we need to understand how much code has been covered by our test cases.
        Code coverage represents the percentage of code that is covered by unit tests.
    </p>

    <h2 class="text-xl font-bold mb-2 mt-4">7.2. Generating Code Coverage Reports</h2>
    <p>
        With the Angular CLI, we can run unit tests and create code coverage reports. These reports allow us to see any
        parts of our code base that may not be properly tested by our unit tests.
    </p>

    <h3 class="text-lg font-bold mb-2">7.2.1. Configuration in karma.conf.js</h3>
    <p>
        The <code>karma.conf.js</code> file contains a key <code>coverageIstanbulReporter</code> for code coverage
        related settings:
    </p>

    <pre class="bg-gray-100 p-4 rounded-md"><code>
coverageIstanbulReporter: &#123;
  dir: require('path').join(__dirname, '../coverage'),
  reports: ['html', 'lcovonly'],
  fixWebpackSourcePaths: true
&#125;,
coverageIstanbulReporter: &#123;
  reports: [ 'html', 'lcovonly' ],
  fixWebpackSourcePaths: true,
  thresholds: &#123;
    statements: 80,
    lines: 80,
    branches: 80,
    functions: 80
  &#125;
&#125;
</code></pre>

    <h3 class="text-lg font-bold mb-2 mt-4">7.2.2. Configuration in angular.json</h3>
    <p>
        To create code-coverage reports every time you test, set the following option in <code>angular.json</code>:
    </p>

    <pre class="bg-gray-100 p-4 rounded-md"><code>
"test": &#123;
  "options": &#123;
    "codeCoverage": true
  &#125;
&#125;
</code></pre>

    <h2 class="text-xl font-bold mb-2 mt-4">7.3. Running Code Coverage</h2>
    <h3 class="text-lg font-bold mb-2">7.3.1. Commands to Generate Coverage Report</h3>
    <pre class="bg-gray-100 p-4 rounded-md"><code>
ng test --codeCoverage
ng test --code-coverage
ng test --no-watch --code-coverage
ng test --watch=false --code-coverage
</code></pre>

    <h2 class="text-xl font-bold mb-2 mt-4">7.4. Viewing the Coverage Report</h2>
    <p>
        Angular CLI generates the coverage report in a separate folder called <code>coverage</code> at the root of your
        project.
    </p>

    <ul class="list-disc pl-6 mb-4">
        <li><code>coverage/index.html</code>: Shows the final report on code coverage of every individual component or
            page/files or folders</li>
        <li><code>coverage/src/index.html</code>: Shows report of <code>polyfills.ts</code> and <code>test.ts</code>
        </li>
    </ul>

    <h2 class="text-xl font-bold mb-2 mt-4">7.5. Interpreting the Coverage Report</h2>
    <p>
        In the coverage report:
    </p>
    <ul class="list-disc pl-6 mb-4">
        <li>Lines marked in GREEN are covered in test</li>
        <li>Lines highlighted in RED are not covered in the test (no test written for such lines)</li>
    </ul>

    <p class="mt-4">
        <strong>Note:</strong> To verify code coverage report percentage, you can comment or uncomment some code from
        <code>.spec</code> files and view the report.
    </p>

    <div class="flex justify-between mt-6">
        <button routerLink="/chapter6" class="px-6 py-2 border-2 rounded-md">
            <a routerLinkActive="font-bold">Prev page</a>
        </button>
        <button routerLink="/chapter8" class="px-6 py-2 border-2 rounded-md">
            <a routerLinkActive="font-bold">Next page</a>
        </button>
    </div>
</div>